{% assign pages = site.pages | where_exp: "page", "page.tags contains include.tag" | sort: "date" | reverse %}
{% if include.limit %}
  {% assign pages = pages | slice: 0, include.limit %}
{% endif %}

<div class="video-pages-grid">
  {% assign cover_count = 0 %}
  {% for page in pages %}
    <div class="video-page-card {% unless page.coverImage %}no-cover{% endunless %}">
        <a href="{{ page.url | relative_url }}">
          {% if page.coverImage %}
            {% if include.countOfCovers == nil or cover_count < include.countOfCovers %}
              <img src="{{ page.coverImage | relative_url}}" alt="{{ page.title | escape }}" class="video-thumbnail">
              {% assign cover_count = cover_count | plus: 1 %}
            {% else %}
              <div class="no-thumbnail">
                <span class="page-icon">ğŸ“„</span>
              </div>
            {% endif %}
          {% else %}
            <div class="no-thumbnail">
              <span class="page-icon">ğŸ“„</span>
            </div>
          {% endif %}
          <div class="page-content">
            <h3>{{ page.title | escape }}</h3>
            <p class="page-date">{{ page.date | date: "%d.%m.%Y" }}</p>
          </div>
        </a>
    </div>
  {% endfor %}
</div> 